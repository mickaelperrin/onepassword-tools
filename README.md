# 1Password Tools

> This is a collection of 1Password related CLI tools and helpers.

```
Usage: op-tools [OPTIONS] COMMAND [ARGS]...

Options:
  -v, --verbosity LVL  Either CRITICAL, ERROR, WARNING, INFO or DEBUG
  --help               Show this message and exit.

Commands:
  new-server-account   Create a new Server item in 1Password with the given...
  new-ssh-key          Generates a new SSH key and store it in 1Password.
  new-website-account  Create a new Login item in 1Password with the given...
  ssh-add              Loads a SSH key stored in 1Password by searching...
```

## new-server-account

```
Usage: op-tools new-server-account [OPTIONS]

  Create a new Server item in 1Password with the given credentials.

Options:
  --host TEXT                Host where the account is created  [required]
  --username TEXT            Account username  [required]
  --password TEXT            Password to use, default autogenerated
  --password-length INTEGER  Autogenerated password length, default 25
  --vault TEXT               Vault uuid where to store the information
  --help                     Show this message and exit.
```

## new ssh-key

```
Usage: op-tools new-ssh-key [OPTIONS]

  Generates a new SSH key and store it in 1Password. Additional information
  are stored also to generate SSH config file when imported with ssh-add subcommand.

Options:
  --from-host TEXT             Host from where the SSH connection starts,
                               default current hostname.
  --from-user TEXT             User who is responsible from initiating the
                               connection, default current user.
  --to-host TEXT               Remote server hostname, prompted if empty.
                               [required]
  --to-user TEXT               Remote user, prompted if empty.  [required]
  --to-host-abbreviated TEXT   Alias of the remote server hostname used to
                               initialize connection.
  --no-passphrase TEXT         Create ssh key without passphrase.
  --passphrase TEXT            Use this passphrase instead of an autogenerated
                               one.
  --passphrase-length INTEGER  Length of the autogenerated passphrase.
  --port INTEGER               Remote port
  --vault TEXT                 1Password vault uuid where to store the SSH key
  --help                       Show this message and exit.
```

## new-website-account 

```
Usage: op-tools new-website-account [OPTIONS]

  Create a new Login item in 1Password with the given credentials.

Options:
  --url TEXT                 URL of the website where the account is created
                             [required]
  --title TEXT               Name of the 1Password item
  --username TEXT            Account username  [required]
  --password TEXT            Password to use, default autogenerated
  --password-length INTEGER  Autogenerated password length, default 25
  --vault TEXT               Vault uuid where to store the information
  --help                     Show this message and exit.
```

## ssh-add

```
Usage: op-tools ssh-add [OPTIONS] [SEARCH]

  Loads a SSH key stored in 1Password by searching [SEARCH] in uuid or in
  item title, and creates a ssh configuration file of the following format:

  Match originalhost <Hostname> user <Remote user>
    IdentitiesOnly yes
    IdentityFile <path to key file>
    Hostname <Hostname>
    User <Remote user>
    Port <Port>

Options:
  -D                    cleanup ssh agent and remove all 1Password managed
                        keys and configuration
  --no-ssh-config TEXT  Do not create ssh config file
  --help                Show this message and exit.

```

